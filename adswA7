index.jsp

<%@ page language="java" contentType="text/html; charset=UTF-8" pageEncoding="UTF-8"%>
<%
    // Check if the session attribute "cart" exists
    Object cartObj = session.getAttribute("cart");
    // If "cart" exists, check its type
    java.util.HashMap<String, Integer> cart;
    if (cartObj instanceof java.util.HashMap) {
        cart = (java.util.HashMap<String, Integer>) cartObj;
    } else {
        // If "cart" is null or not a HashMap, create a new one and set it in the session
        cart = new java.util.HashMap<String, Integer>();
        session.setAttribute("cart", cart);
    }
%>
<!DOCTYPE html>
<html>
<head>
    <title>Shopping Cart</title>
    <style>
        table {
            width: 50%;
            border-collapse: collapse;
            margin-top: 20px;
        }
        th, td {
            border: 1px solid black;
            padding: 8px;
            text-align: left;
        }
        th {
            background-color: #f2f2f2;
        }
    </style>
</head>
<body>
    <h2>Add Item to Cart</h2>
    <form action="additem.jsp" method="post">
        <label>Item Name:</label>
        <input type="text" name="item" required>
        <input type="submit" value="Add to Cart">
    </form>
    <h2>Shopping Cart</h2>
    <table>
        <tr>
            <th>Item</th>
            <th>Quantity</th>
            <th>Action</th>
        </tr>
        <%
            for (String item : cart.keySet()) {
        %>
        <tr>
            <td><%= item %></td>
            <td><%= cart.get(item) %></td>
            <td><a href="removeitem.jsp?item=<%= item %>">Remove</a></td>
        </tr>
        <%
            }
        %>
    </table>
</body>
</html>


additem.jsp

<%@ page language="java" contentType="text/html; charset=UTF-8" pageEncoding="UTF-8"%>
<%
    String item = request.getParameter("item");
    java.util.HashMap<String, Integer> cart = (java.util.HashMap<String, Integer>) session.getAttribute("cart");
    if (cart.containsKey(item)) {
        cart.put(item, cart.get(item) + 1);
    } else {
        cart.put(item, 1);
    }
    response.sendRedirect("index.jsp");
%>


removeitem.jsp
<%@ page language="java" contentType="text/html; charset=UTF-8" pageEncoding="UTF-8"%>
<%
    String item = request.getParameter("item");
    java.util.HashMap<String, Integer> cart = (java.util.HashMap<String, Integer>) session.getAttribute("cart");
    if (cart.containsKey(item)) {
        if (cart.get(item) > 1) {
            cart.put(item, cart.get(item) - 1);
        } else {
            cart.remove(item);
        }
    }
    response.sendRedirect("index.jsp");
%>
