#include <iostream>
#include <string>

using namespace std;

class CricketPlayer {
public:
    string code;
    string name;
    int matches_played;
    int total_runs;
    int times_not_out;

    CricketPlayer() : matches_played(0), total_runs(0), times_not_out(0) {}

    void input() {
        cout << "Enter player code: ";
        cin >> code;
        cin.ignore(); // Ignore newline left in the buffer

        cout << "Enter player name: ";
        getline(cin, name);

        cout << "Enter number of matches played: ";
        cin >> matches_played;

        cout << "Enter total runs: ";
        cin >> total_runs;

        cout << "Enter number of times not out: ";
        cin >> times_not_out;
    }

    void display() const {
        cout << code << "\t" << name << "\t" << matches_played << "\t\t" << total_runs << "\t\t" << times_not_out;
    }

    float avgRuns() const {
        int innings = matches_played - times_not_out;
        return innings > 0 ? static_cast<float>(total_runs) / innings : 0.0f;
    }
};

int main() {
    int n;
    CricketPlayer obj[10];
    CricketPlayer temp;
    int p_no;
    float total_avg = 0;
    float a;

    cout << "Enter number of players (should be less than 10): ";
    cin >> n;

    if (n < 10) {
        for (int i = 0; i < n; i++) {
            cout << "\n\nEnter details of player " << i + 1 << ": \n";
            obj[i].input();
        }

        int choice;
        do {
            cout << "\nMenu:\n";
            cout << "1. Enter details of players\n";
            cout << "2. Display average runs of a single player\n";
            cout << "3. Display average runs of all players\n";
            cout << "4. Display list of players in sorted order as per total runs\n";
            cout << "0. Exit\n";
            cout << "Enter your choice: ";
            cin >> choice;

            switch (choice) {
                case 1:
                    for (int i = 0; i < n; i++) {
                        cout << "\n\nEnter details of player " << i + 1 << ": \n";
                        obj[i].input();
                    }
                    break;

                case 2:
                    cout << "\n\nEnter a player number to get his average runs: ";
                    cin >> p_no;
                    if (p_no > 0 && p_no <= n) {
                        obj[p_no - 1].display();
                        cout << "\n-------------------------------" << endl;
                        cout << "\tAverage runs of " << obj[p_no - 1].name << " is: " << obj[p_no - 1].avgRuns() << endl;
                    } else {
                        cout << "Invalid player number." << endl;
                    }
                    break;

                case 3:
                    cout << "\n\n\tAverage runs of all players: ";
                    total_avg = 0;
                    for (int i = 0; i < n; i++) {
                        total_avg += obj[i].avgRuns();
                    }
                    a = total_avg / n;
                    cout << a << endl;
                    break;

                case 4:
                    cout << "List of players in sorted order as per total runs:\n";
                    for (int i = 0; i < n - 1; i++) {
                        for (int j = i + 1; j < n; j++) {
                            if (obj[i].total_runs < obj[j].total_runs) {
                                temp = obj[i];
                                obj[i] = obj[j];
                                obj[j] = temp;
                            }
                        }
                    }

                    cout << "____________________________________________________________" << endl;
                    cout << "\t\tPlayer Details" << endl;
                    cout << "____________________________________________________________" << endl;
                    cout << "Code\tName\tMatches Played\tTotal Runs\tNot Outs" << endl;
                    for (int i = 0; i < n; i++) {
                        obj[i].display();
                        cout << endl;
                    }
                    break;

                case 0:
                    cout << "Exiting..." << endl;
                    break;

                default:
                    cout << "Invalid choice." << endl;
            }
        } while (choice != 0);
    } else {
        cout << "Number of players should be less than 10." << endl;
    }

    return 0;
}
